#!/bin/bash

echo -e "===\n>> Akij Pre-push Hook: Checking branch name / ржЖржХрж┐ржЬ ржкрзНрж░рж┐-ржкрзБрж╢ рж╣рзБржХ: рж╢рж╛ржЦрж╛рж░ ржирж╛ржо ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ..."

BRANCH=`git rev-parse --abbrev-ref HEAD`
PROTECTED_BRANCHES="^(master|main|develop)"

if [[ $1 != *"$BRANCH"* ]]
then
  echo -e "\nЁЯЪл You must use (git push origin $BRANCH) / ржЖржкржирж╛ржХрзЗ ржЕржмрж╢рзНржпржЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ рж╣ржмрзЗ (ржЧрж┐ржЯ ржкрзБрж╢ ржЕрж░рж┐ржЬрж┐ржи $BRANCH).\n" && exit 1
fi

if [[ "$BRANCH" =~ $PROTECTED_BRANCHES ]]
thenYou must use (git push origin $BRANCH)
  echo -e "\nЁЯЪл Cannot push to remote $BRANCH branch, please create your own branch and use PR."
  echo -e "ЁЯЪл ржжрзВрж░ржмрж░рзНрждрзА $BRANCH рж╢рж╛ржЦрж╛ржпрж╝ ржарзЗрж▓рзЗ ржжрзЗржУржпрж╝рж╛ ржпрж╛ржмрзЗ ржирж╛, ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржЖржкржирж╛рж░ ржирж┐ржЬрж╕рзНржм рж╢рж╛ржЦрж╛ рждрзИрж░рж┐ ржХрж░рзБржи ржПржмржВ PR ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред.\n" && exit 1
fi

echo -e ">> Finish checking branch name / рж╢рж╛ржЦрж╛рж░ ржирж╛ржо ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рж╛ рж╢рзЗрж╖ ржХрж░рзБржи.\n==="

exit 0
